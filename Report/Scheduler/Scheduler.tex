\chapter{Scheduler Tool}
\label{chapter:scheduler}
The scheduler is a tool which accepts the information about the hardware configuration 
and matrix structure to generate a instruction stream and BRAM memory map
for all the elements of input matrix as well as the generated factors. For a 
given circuit this tool has to be used only once. After that generated information 
can be used for subsequent iterations. The operation of the scheduler tool is divided onto 
three major phases: 
\begin{enumerate}
    \item Input processing, Symbolic analysis and Memory Allocation
    \item Scheduling 
    \item Intersection stream and Memory map generation
\end{enumerate}

\section{Input Processing}
The scheduler tool accepts the input matrix data in the Compressed Column Sparse (CCS)
format. Also it requires the hardware configuration information as follows:
\begin{multicols}{2}
    \begin{itemize}
        \item Number of BRAM blocks
        \item Number of MAC units
        \item Number of divider units
        \item Latency of all the units
        \item Number of ports available at each BRAM
        \item Address depth of BRAMs
    \end{itemize}
\end{multicols}
The preprocessing process ensures that the  on-chip memory is sufficient to perform the 
operation.

\input{./Scheduler/symbolic.tex}

\section{Memory Address Assignment}
Symbolic analysis determines location of all the non-zero elements in the factor matrix hence 
the amount of storage required to store both L and U matrices can be calculated. 
All the diagonal elements of the L factor matrix are zero and hence do not 
require memory storage an can be omitted from the process. Also the elements
of the original matrix ($A$) are used only once and occupy the memory space 
corresponding non-zero locations in the factor matrix. There are many ways to allocate memory addresses
to matrices. Following are the three simple ways to allocate address locations:
\begin{description}
    \item[Linear Address Allocation]: All the elements in the matrix are arranged linearly one after the other. This type of Allocation 
        reduces the data gathering overhead after the execution has finished but hinders the performance as most of the times all the elements 
        in one column are allocated in the same BRAM and cause read congestions.
    \item[Circular Address Allocation]: In this allocation policy the elements from the same column are circularly distributed 
        across all the BRAMs. 
\end{description}

\input{./Scheduler/schedule.tex}

% The scheduling algorithm uses the computational flow graph generated by symbolic 
% analysis step to schedule the operations while taking care of the conflicts.